- https://github.com/appshore/OrdersToParcelsMicroservices

---------------------- MoleculerJS - Docker - Traefik - Nats ---------------------------------------
$ git clone git://github.com/appshore/OrdersToParcelsMicroservices.git 5_traefik_moleculer
$ cd 5_traefik_moleculer
$ npm install

$ npm run dev
- MONGO_URI=mongodb://localhost/test_moleculer

- llançar Portainer:
    $ sudo docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer
    - http://localhost:9000 -> admin/Yomogan1

- kill del port 27017 -> mongo està en marxa
$ sudo service apache2 stop

- Crear /traefik/traefik.toml
- docker-compose.yml
    - corregir sintaxis api: labels
    - traefik: 
        image: traefik:v1.7
        volumes:
            - /var/run/docker.sock:/var/run/docker.sock # So that Traefik can listen to the Docker events
            - ./traefik/traefik.toml:/traefik.toml

- MONGO_URI=mongodb://mongo/test_moleculer_db

$ sudo docker-compose up --build -d

- Browser: http://localhost:4001
- Traefik dashboard: http://localhost:4002

- http://localhost:4001/api/promotions

- Scale up services
    $ sudo docker-compose up -d --scale api=2
$ sudo docker-compose stop
